{"version":3,"sources":["webpack:///D:/project/meowth-app/main.js","webpack:///D:/project/meowth-app/pages/index/index.vue?078f","webpack:///D:/project/meowth-app/pages/index/index.vue?02ef","webpack:///D:/project/meowth-app/pages/index/index.vue?8e34","webpack:///D:/project/meowth-app/pages/index/index.vue?01be","webpack:///D:/project/meowth-app/pages/index/index.vue","webpack:///D:/project/meowth-app/pages/index/index.vue?20c0","webpack:///D:/project/meowth-app/pages/index/index.vue?8d68"],"names":["createPage","Page","app","getApp","data","onLoad","globalData","wxDB","wx","cloud","database","env","console","log","_this","getSetting","success","res","authSetting","getUserInfo","authorize","scope","fail","err","error","methods","userInfo","updateUserInfo","switchTab","url","db","callFunction","name","then","collection","where","_openid","openid","get","userRes","length","date","Date","add","nickName","NickName","gender","avatarUrl","weChat","province","city","theme","registerTime","getTime","registerYear","getFullYear","isCustomPhoto","isCustomNickName","addRes","catch","doc","_id","update","updateRes"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=450ced72&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=450ced72&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"450ced72\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('450ced72', component.options)\n    } else {\n      api.reload('450ced72', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=450ced72&scoped=true&\", function () {\n      api.rerender('450ced72', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"project/meowth-app/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=450ced72&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nconst app = getApp()\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tapp.globalData.wxDB =  wx.cloud.database({\r\n\t\t\tenv: 'develop-tm3ye'\r\n\t\t}) \r\n\t\tconsole.log(wx.env)\r\n\t\tlet _this = this;\r\n\t\twx.getSetting({\r\n\t\t\tsuccess:function(res){\r\n\t\t\t\tif(res.authSetting['scope.userInfo']){\r\n\t\t\t\t\t_this.getUserInfo()\r\n\t\t\t\t}else{\r\n\t\t\t\t\twx.authorize({\r\n\t\t\t\t\t\tscope: 'scope.userInfo',\r\n\t\t\t\t\t\tsuccess (res) {\r\n\t\t\t\t\t\t\tconsole.log('授权成功:',res);\r\n\t\t\t\t\t\t\t_this.getUserInfo()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t  })\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail:function(err){\r\n\t\t\t\tconsole.error('查询是否授权失败！',err)\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tgetUserInfo() {\r\n\t\t\tlet _this = this;\t\t\t\r\n\t\t\twx.getUserInfo({\r\n\t\t\t\tsuccess: function(res) {\t\t\t\t\t\r\n\t\t\t\t\tgetApp().globalData.userInfo = res.userInfo;\r\n\t\t\t\t\t_this.updateUserInfo()\r\n\t\t\t\t\twx.switchTab({\r\n\t\t\t\t\t\turl:'../my/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tupdateUserInfo(){\r\n\t\t\tconst db = wx.cloud.database({\r\n\t\t\t  env: 'develop-tm3ye'\r\n\t\t\t})\r\n\t\t\twx.cloud.callFunction({\r\n\t\t\t\tname:'login'\r\n\t\t\t}).then(res=>{\r\n\t\t\t\tdb.collection('User').where({\r\n\t\t\t\t\t_openid: res.openid\r\n\t\t\t\t}).get().then(userRes=>{\t\t\t\r\n\t\t\t\t\tconst userInfo = getApp().globalData.userInfo\r\n\t\t\t\t\tif(userRes.data.length === 0){\r\n\t\t\t\t\t\tvar date = new Date()\r\n\t\t\t\t\t\tdb.collection('User').add({\r\n\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\tnickName:userInfo.NickName,\r\n\t\t\t\t\t\t\t\tgender:userInfo.gender,\r\n\t\t\t\t\t\t\t\tavatarUrl:userInfo.avatarUrl,\r\n\t\t\t\t\t\t\t\tweChat:'',\r\n\t\t\t\t\t\t\t\tprovince:userInfo.province,\r\n\t\t\t\t\t\t\t\tcity:userInfo.city,\r\n\t\t\t\t\t\t\t\ttheme:'mint-green',\r\n\t\t\t\t\t\t\t\tregisterTime:date.getTime(),\r\n\t\t\t\t\t\t\t\tregisterYear:date.getFullYear(),\r\n\t\t\t\t\t\t\t\tisCustomPhoto:false,\r\n\t\t\t\t\t\t\t\tisCustomNickName:false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then(addRes=>{\r\n\t\t\t\t\t\t\tconsole.log('添加用户信息成功！',addRes)\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.log('update')\r\n\t\t\t\t\t\tconst data = {}\r\n\t\t\t\t\t\tif(!userRes.data.isCustomPhoto){\r\n\t\t\t\t\t\t\tdata.avatarUrl = userInfo.avatarUrl\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!userRes.data.isCustomNickName){\r\n\t\t\t\t\t\t\tdata.nickName = userInfo.NickName\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdb.collection('User').doc(userRes.data._id).update({\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t}).then(updateRes=>{\r\n\t\t\t\t\t\t\tconsole.log('更新用户信息成功！',updateRes)\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}).catch(err=>{\r\n\t\t\t\tconsole.error(err)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=450ced72&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=450ced72&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}